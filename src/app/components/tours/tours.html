<div class="bg-slate-100 py-12 sm:py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">
                I nostri Tour in Giappone
            </h2>
            <p class="text-slate-600 text-lg max-w-2xl mx-auto">
                Scopri i nostri tour esclusivi e viaggi su misura per il Giappone
            </p>
        </div>

        <!-- Tours Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            @for(offer of tours; track offer.id) {
            <div class="group relative bg-white rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300 border border-slate-100 hover:border-red-200 flex flex-col cursor-pointer"
                (click)="viewDetails(offer.id)">

                <!-- Image Section - More compact -->
                <div class="relative h-48 overflow-hidden">
                    <img [src]="offer.image" [alt]="offer.title"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>

                    <!-- Ribbon - Redesigned as corner flag -->
                    @if(offer.ribbon) {
                    <div [ngClass]="getRibbonClasses(offer.ribbon.color)"
                        class="absolute top-0 right-0 px-4 py-1.5 text-xs font-bold shadow-lg">
                        {{ offer.ribbon.text }}
                    </div>
                    }

                    <!-- Extensions Badge - Top left, more subtle -->
                    @if(offer.availableExtensions && offer.availableExtensions.length > 0) {
                    <div class="absolute top-3 left-3 bg-black/40 backdrop-blur-md px-2.5 py-1 rounded-lg">
                        <div class="flex items-center gap-1.5">
                            <i class="pi pi-plus-circle text-white text-xs"></i>
                            <span class="text-xs font-semibold text-white">
                                +{{ offer.availableExtensions.length }}
                            </span>
                        </div>
                    </div>
                    }

                    <!-- Title overlay - Simplified -->
                    <div class="absolute bottom-0 left-0 right-0 p-4">
                        <div
                            class="inline-block px-2.5 py-0.5 bg-white/20 backdrop-blur-sm rounded-md text-white text-xs font-medium mb-2">
                            {{ offer.category }}
                        </div>
                        <h3 class="text-xl font-bold text-white leading-tight">
                            {{ offer.title }}
                        </h3>
                    </div>
                </div>

                <!-- Content Section - More organized -->
                <div class="p-5 flex flex-col flex-1">
                    <!-- Quick Info Pills -->
                    <div class="flex flex-wrap gap-2 mb-4">
                        @if(offer.dates) {
                        <div
                            class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 rounded-lg text-xs text-slate-700">
                            <i class="pi pi-calendar text-red-watabi text-xs"></i>
                            <span class="font-medium">{{ offer.dates }}</span>
                        </div>
                        }
                        @if(offer.departure) {
                        <div
                            class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 rounded-lg text-xs text-slate-700">
                            <i class="pi pi-map-marker text-red-watabi text-xs"></i>
                            <span class="font-medium">{{ offer.departure }}</span>
                        </div>
                        }
                    </div>

                    <!-- Features - Compact list -->
                    <div class="mb-4 flex-1">
                        <ul class="space-y-1.5">
                            @for(feature of offer.features.slice(0, 3); track feature) {
                            <li class="flex items-start gap-2 text-sm text-slate-600">
                                <i class="pi pi-check text-red-watabi text-xs mt-0.5 flex-shrink-0"></i>
                                <span class="leading-snug">{{ feature }}</span>
                            </li>
                            }
                        </ul>
                        @if(offer.features.length > 3) {
                        <span class="text-xs text-slate-500 mt-1 inline-block">+{{ offer.features.length - 3 }}
                            altro...</span>
                        }
                    </div>

                    <!-- Price Section - Card style -->
                    <div class="bg-gradient-to-br from-slate-200 to-transparent rounded-xl p-4 mb-3">
                        @if(offer.priceDiscounted && offer.priceOriginal) {
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-xs text-slate-500 line-through">€{{ offer.priceOriginal }}</span>
                            <span
                                class="text-xs font-bold text-red-600 bg-red-100 px-2 py-0.5 rounded-full">SCONTO</span>
                        </div>
                        <div class="flex items-baseline justify-between">
                            <div>
                                <span class="text-2xl font-bold text-red-watabi">€{{ offer.priceDiscounted }}</span>
                                <span class="text-xs text-slate-600 ml-1">/ persona</span>
                            </div>
                        </div>
                        } @else if(offer.priceFrom) {
                        <div class="flex items-baseline justify-between">
                            <div>
                                <span class="text-xs text-slate-500 block mb-0.5">A partire da</span>
                                <span class="text-2xl font-bold text-red-watabi">€{{ offer.priceFrom }}</span>
                                <span class="text-xs text-slate-600 ml-1">/ persona</span>
                            </div>
                        </div>
                        } @else {
                        <div class="text-center">
                            <span class="text-sm font-semibold text-slate-600">Disponibile presto</span>
                        </div>
                        }
                    </div>

                    <!-- Action Button - Sleeker -->
                    <button (click)="viewDetails(offer.id); $event.stopPropagation()"
                        class="w-full py-2.5 px-4 bg-red-watabi text-white font-semibold rounded-lg hover:bg-red-watabi transition-all duration-200 flex items-center justify-center gap-2 group">
                        @if(offer.hasItinerary) {
                        <span>Vedi Itinerario</span>
                        <i class="pi pi-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
                        } @else {
                        <span>Scopri di più</span>
                        <i class="pi pi-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
                        }
                    </button>
                </div>
            </div>
            }
        </div>

        <!-- CTA Section -->
        <div class="mt-16 relative rounded-2xl overflow-hidden shadow-xl">
            <div class="absolute inset-0 z-0">
                <img src="https://images.unsplash.com/photo-1490806843957-31f4c9a91c65" alt="Japan background"
                    class="w-full h-full object-cover object-[50%_80%]" />
                <div class="absolute inset-0 bg-gradient-to-r from-red-watabi/85 to-red-dark/85"></div>
            </div>

            <div class="relative z-10 p-8 md:p-12 text-center text-white">
                <div class="max-w-2xl mx-auto">
                    <div
                        class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <i class="pi pi-compass text-3xl text-white"></i>
                    </div>
                    <h3 class="text-3xl font-bold mb-3">Non trovi quello che cerchi?</h3>
                    <p class="text-lg mb-6 opacity-95">
                        Creiamo insieme il tuo viaggio su misura in Giappone
                    </p>
                    <button
                        class="bg-white text-red-watabi px-8 py-3 rounded-xl font-bold hover:shadow-2xl hover:scale-105 transition-all duration-200 inline-flex items-center gap-2">
                        <span>Contattaci Ora</span>
                        <i class="pi pi-arrow-right text-sm"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>