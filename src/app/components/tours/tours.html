<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <app-travel-type></app-travel-type>

    <!-- Header Section -->
    <div class="text-center mb-12">
        <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            Le Nostre Offerte
        </h2>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
            Scopri i nostri tour esclusivi e viaggi su misura per il Giappone
        </p>
    </div>

    <!-- Tours Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        @for(offer of tours; track offer.id) {
        <div class="group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer"
            (click)="viewDetails(offer.id)">

            <!-- Ribbon -->
            @if(offer.ribbon) {
            <div [ngClass]="getRibbonClasses(offer.ribbon.color)">
                {{ offer.ribbon.text }}
            </div>
            }

            <!-- Badge Estensioni NUOVO -->
            @if(offer.availableExtensions && offer.availableExtensions.length > 0) {
            <div class="absolute top-4 left-4 bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg z-10">
                <div class="flex items-center gap-2">
                    <i class="pi pi-plus-circle text-red-watabi text-sm"></i>
                    <span class="text-xs font-bold text-gray-700">
                        {{ offer.availableExtensions.length }} {{ offer.availableExtensions.length === 1 ? 'estensione'
                        : 'estensioni' }}
                    </span>
                </div>
            </div>
            }

            <!-- Image -->
            <div class="relative h-64 overflow-hidden">
                <img [src]="offer.image" [alt]="offer.title"
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>

                <!-- Title overlay -->
                <div class="absolute bottom-4 left-4 right-4">
                    <h3 class="text-2xl font-bold text-white mb-1">
                        {{ offer.title }}
                    </h3>
                    <span
                        class="inline-block px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-white text-xs font-semibold">
                        {{ offer.category }}
                    </span>
                </div>
            </div>

            <!-- Content -->
            <div class="p-6">
                <!-- Features -->
                <ul class="space-y-2 mb-4">
                    @for(feature of offer.features; track feature) {
                    <li class="flex items-start gap-2 text-sm text-gray-700">
                        <i class="pi pi-check-circle text-red-watabi mt-0.5 flex-shrink-0"></i>
                        <span>{{ feature }}</span>
                    </li>
                    }
                </ul>

                <!-- Dates -->
                @if(offer.dates) {
                <div class="flex items-center gap-2 text-sm text-gray-600 mb-2">
                    <i class="pi pi-calendar text-red-watabi"></i>
                    <span>{{ offer.dates }}</span>
                </div>
                }

                <!-- Departure -->
                @if(offer.departure) {
                <div class="flex items-center gap-2 text-sm text-gray-600 mb-4">
                    <i class="pi pi-send text-red-watabi"></i>
                    <span>{{ offer.departure }}</span>
                </div>
                }

                <!-- Divider -->
                <div class="border-t border-gray-200 my-4"></div>

                <!-- Price Section -->
                <div class="flex justify-between items-end mb-4">
                    <div>
                        @if(offer.priceDiscounted && offer.priceOriginal) {
                        <div class="flex items-baseline gap-2">
                            <span class="text-xs text-gray-500">Da</span>
                            <span class="text-sm text-gray-400 line-through">€ {{ offer.priceOriginal }}</span>
                        </div>
                        <div class="flex items-baseline gap-1">
                            <span class="text-2xl font-bold text-red-watabi">€ {{ offer.priceDiscounted }}</span>
                            <span class="text-sm text-gray-600">a persona</span>
                        </div>
                        <span class="text-xs text-red-600 font-semibold">Promo in numero limitato</span>
                        } @else if(offer.priceFrom) {
                        <div class="flex items-baseline gap-2">
                            <span class="text-xs text-gray-500">Da</span>
                            <span class="text-2xl font-bold text-red-watabi">€ {{ offer.priceFrom }}</span>
                        </div>
                        <span class="text-sm text-gray-600">a persona</span>
                        } @else {
                        <div class="text-gray-600">
                            <span class="text-sm font-semibold">Disponibile presto</span>
                        </div>
                        }
                    </div>
                </div>

                <!-- Action Button -->
                <button (click)="viewDetails(offer.id); $event.stopPropagation()"
                    class="w-full py-3 px-4 bg-gradient-to-r from-red-watabi to-red-dark text-white font-semibold rounded-lg hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2">
                    @if(offer.hasItinerary) {
                    <i class="pi pi-map text-sm"></i>
                    <span>Itinerario di Viaggio</span>
                    } @else {
                    <i class="pi pi-eye text-sm"></i>
                    <span>Vedi Dettagli</span>
                    }
                </button>
            </div>
        </div>
        }
    </div>

    <!-- CTA Section -->
    <div class="mt-16 relative rounded-2xl overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1490806843957-31f4c9a91c65" alt="Japan background"
                class="w-full h-full object-cover object-[50%_80%]" />
            <div class="absolute inset-0 bg-gradient-to-r from-red-watabi/75 to-red-dark/75"></div>
        </div>

        <div class="relative z-10 p-8 md:p-12 text-center text-white">
            <h3 class="text-3xl font-bold mb-4">Non trovi quello che cerchi?</h3>
            <p class="text-lg mb-6 opacity-90">
                Creiamo insieme il tuo viaggio su misura in Giappone
            </p>
            <button
                class="bg-white text-red-watabi px-8 py-3 rounded-lg font-semibold hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200">
                Contattaci Ora
            </button>
        </div>
    </div>
</div>